<!DOCTYPE html>
<html>
  <head>
    <script
      src="https://kit.fontawesome.com/313bf0fefb.js"
      crossorigin="anonymous"
    ></script>
    <style>
      body {
        margin: 0;
        padding: 0;
        background: #fff;
      }

      .search-box {
        z-index: 2;
        position: absolute;
        top: 20%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #2f3640;
        height: 40px;
        border-radius: 40px;
        padding: 10px;
      }

      .search-box:hover > .search-txt {
        width: 240px;
        padding: 0 6px;
      }

      .search-box:hover > .search-btn {
        background: white;
        color: black;
      }

      .search-btn {
        color: #e84118;
        float: right;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #2f3640;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: 0.4s;
        color: white;
        cursor: pointer;
      }

      .search-btn > i {
        font-size: 30px;
      }

      .search-txt {
        border: none;
        background: none;
        outline: none;
        float: left;
        padding: 0;
        color: white;
        font-size: 16px;
        transition: 0.4s;
        line-height: 40px;
        width: 0px;
        font-weight: bold;
      }

      footer {
        position: absolute;
        left: 0;
        bottom: 0;
        width: 100%;
        text-align: center;
      }

      footer img {
        z-index: 2;
        position: relative;
      }

      footer nav {
        z-index: 3;
        position: relative;
      }

      footer .bg {
        z-index: 1;
        position: absolute;
        left: 0;
        bottom: 0;
        width: 100%;
        height: 80px;
      }

      main {
        width: 100%;
        position: absolute;
        margin: 0 auto;
        position: absolute;
        left: 50%;
        -webkit-transform: translateX(-50%);
        transform: translateX(-50%);
      }

      main ul {
        text-align: center;
        padding: 1em;
        overflow-x: hidden;
        margin: 0 auto;
      }

      main article {
        overflow-x: hidden;
        left: 0;
        right: 0;
        top: 50%;
        position: absolute;
        transform: translateY(-50%);
        margin: 16px -100%;
        padding: 0 100%;
        background-color: #eee;
        box-shadow: 0 0 100px 8px #e0e0e0;
      }

      main div {
        margin: calc(20vh + 80px) 0 200px 0;
        height: calc(100vh - 20vh - 280px);
      }

      main article section {
        max-height: calc(100vh - 20vh - 280px);
        overflow-y: auto;
      }

      html,
      body {
        overflow-x: hidden;
        position: absolute;
        width: 100%;
        height: 100%;
        max-height: 100%;
        margin: 0;
        padding: 0;
      }

      header {
        z-index: 1;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        text-align: center;
      }

      ul {
        list-style-type: none;
        text-align: center;
      }

      ul li {
        display: inline;
        margin: 8px;
      }

      ul li a {
        margin: 8px 0;
      }

      main a {
        text-decoration: none;
        line-height: 64px;
        position: relative;
        display: inline-block;
        font-weight: 400;
        white-space: nowrap;
        text-align: center;
        box-shadow: 0 2px 0 rgba(0, 0, 0, 0.015);
        cursor: pointer;
        -webkit-transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);
        transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);
        height: 64px;
        padding: 0 20px;
        font-size: 14px;
        border-radius: 4px;
        color: rgba(0, 0, 0, 0.65);
        background-color: #fff;
        border: 1px solid #d9d9d9;
        margin: 0;
        border-color: black;
        color: black;
      }

      main a:hover {
        box-shadow: #be5600 1px 1px, #be5600 2px 2px, #be5600 3px 3px;
        color: #be5600;
        background-color: white;
        border-color: #be5600;
        font-weight: 900;
      }

      li .fas {
        display: none;
        position: absolute;
        transform: translate(-50%, -50%);
        top: 50%;
        left: 50%;
        font-size: 28px;
      }
      li a {
        position: relative;
      }
      li:hover .fas {
        display: initial;
      }
      li:hover span {
        visibility: hidden;
      }

      .hide-default,
      .hide {
        display: none;
      }

      .hide-default.show {
        display: initial;
      }
    </style>
    <script>
      String.prototype.replaceAll = function(search, replacement) {
          var target = this;
          return target.split(search).join(replacement);
      };

      var i18n = {};
      onload = function() {
        downloadI18n("/i18n.xml", function(xml) {
          loadI18n(xml);
          downloadI18n("i18n.xml", function(xml) {
            loadI18n(xml);
            refreshI18n();
          });
        });
      };

      function downloadI18n(path, callback) {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            callback(xhttp.responseXML);
          }
        };
        xhttp.open("GET", path, true);
        xhttp.send();
      }

      function loadI18n(xml) {
        var txt = "";
        path = "//string";
        if (xml.evaluate) {
          var nodes = xml.evaluate(path, xml, null, XPathResult.ANY_TYPE, null);
          var result = null;
          while ((result = nodes.iterateNext())) {
            i18n[result.getAttribute("name")] = result.childNodes[0].nodeValue;
          }
        } else if (
          window.ActiveXObject ||
          xhttp.responseType == "msxml-document"
        ) {
          xml.setProperty("SelectionLanguage", "XPath");
          nodes = xml.selectNodes(path);
          for (i = 0; i < nodes.length; i++) {
            var result = nodes[i].childNodes[0];
            i18n[result.getAttribute("name")] = result.nodeValue;
          }
        }
      }

      function refreshI18n() {
        [...document.querySelectorAll(".hide-default a[data-id]")].forEach(e =>
          i18nElement(e, i18nFullId(e.dataset.id))
        );
      }

      function i18nElement(element, value) {
        element.innerText = value;
      }

      function i18nFullId(fullId) {
        return fullId
          .split("@")
          .map(id => i18nId(id))
          .join("@");
      }

      function i18nId(id) {
        if (i18n["name_" + id] != null) {
          return normalize(i18n["name_" + id]);
        } else {
          return normalize(id.toUpperCase());
        }
      }

      function normalize(text) {
        return text
              .replaceAll("_", " ")
              .replaceAll("\n", " ")
              .replaceAll("\\n", " ")
              .trim();
      }

      function search(text) {
        if (text == null || text.length < 2) {
          [...document.querySelectorAll(".show-default.hide")].forEach(e =>
            e.classList.remove("hide")
          );
          [...document.querySelectorAll(".hide-default.show")].forEach(e =>
            e.classList.remove("show")
          );
        } else {
          text = text.toUpperCase();
          [
            ...document.querySelectorAll(".show-default:not(.hide)")
          ].forEach(e => e.classList.add("hide"));
          [...document.querySelectorAll(".hide-default.show")]
            .filter(e => !searchMatches(e.querySelector("a").innerText, text))
            .forEach(e => e.classList.remove("show"));
          [...document.querySelectorAll(".hide-default:not(.show)")]
            .filter(e => searchMatches(e.querySelector("a").innerText, text))
            .forEach(e => e.classList.add("show"));
        }
      }

      function searchMatches(nodeText, searchText) {
        nodeText = nodeText.toUpperCase();
        var placeSpace = searchText.split("@");
        if (placeSpace.length == 1) {
          return nodeText.indexOf(searchText) !== -1;
        } else {
          var nodePlaceSpace = nodeText.split("@");
          if (nodePlaceSpace.length == 1) {
            return false;
          } else {
            return (
              nodePlaceSpace[0].indexOf(placeSpace[0]) &&
              nodePlaceSpace[1].indexOf(placeSpace[1])
            );
          }
        }
      }
    </script>
  </head>
  <body>
    <header>
      <h1>
        PBMap
      </h1>
      <h2>
        Find a place on Bialystok University of Technology
      </h2>
    </header>
    <div>
      <div class="search-box">
        <input
          type="text"
          class="search-txt"
          placeholder="Type to search"
          onkeyup="search(this.value)"
        />
        <span class="search-btn" href="#">
          <i class="fas fa-search"></i>
        </span>
      </div>
    </div>
    <main>
      <div>
        <article>
          <section>
            <ul>
              <li class="show-default">
                <a href="mobile/pb_campus"
                  ><i class="fas fa-map-marked-alt"></i><span>Campus</span></a
                >
              </li>
              <li class="show-default">
                <a href="mobile/pb_acs"
                  ><i class="fas fa-dumbbell"></i><span>ACS</span></a
                >
              </li>
              <li class="show-default">
                <a href="mobile/pb_cnk"
                  ><i class="fas fa-book-reader"></i><span>CNK</span></a
                >
              </li>
              <li class="show-default">
                <a href="mobile/pb_wa"
                  ><i class="fas fa-archway"></i><span>WA</span></a
                >
              </li>
              <li class="show-default">
                <a href="mobile/pb_wb"
                  ><i class="fas fa-building"></i><span>WB</span></a
                >
              </li>
              <li class="show-default">
                <a href="mobile/pb_we"
                  ><i class="fas fa-bolt"></i><span>WE</span></a
                >
              </li>
              <li class="show-default">
                <a href="mobile/pb_wi"
                  ><i class="fas fa-laptop-code"></i><span>WI</span></a
                >
              </li>
              <li class="show-default">
                <a href="mobile/pb_wm"
                  ><i class="fas fa-wrench"></i><span>WM</span></a
                >
              </li>
              <li class="show-default">
                <a href="mobile/pb_wz"
                  ><i class="fas fa-users"></i><span>WIZ</span></a
                >
              </li>
              <li class="show-default">
                <a href="mobile/pb_zwl"
                  ><i class="fas fa-tree"></i><span>ZWL</span></a
                >
              </li>
              %APPEND%
            </ul>
          </section>
        </article>
      </div>
    </main>
    <footer>
      <svg
        class="bg"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 200 100"
        preserveAspectRatio="none"
      >
        <circle fill="#ff8600" cx="0" cy="100" r="100"></circle>
        <circle fill="#ff8600" cx="200" cy="100" r="100"></circle>
      </svg>
      <img src="logo.png" />
      <nav>
        %I18N%
      </nav>
    </footer>
  </body>
</html>
